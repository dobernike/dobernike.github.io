{"version":3,"file":"main.js","sources":["js/util.js","js/game/header.js","js/game/footer.js","js/game/abstract-view.js","js/game/level-view.js","js/data/quest.js","js/data/quest-data.js","js/game-screen.js","js/welcome-screen.js","js/main.js"],"sourcesContent":["export const render = (template) => {\n  const wrapper = document.createElement(`div`);\n  wrapper.innerHTML = template;\n  return wrapper;\n};\n\nexport const mainElement = document.querySelector(`#main`);\n\nexport const changeScreen = (element) => {\n  mainElement.innerHTML = ``;\n  mainElement.appendChild(element);\n};\n\n","export default (state) => `<header class=\"header\">\n<div>Мир: ${state.level}</div>\n<div>Жизни:\n${new Array(3 - state.lives)\n    .fill(`<span class=\"heart__empty\">♡</span>`).join(``)}\n${new Array(state.lives)\n    .fill(`<span class=\"heart__full\">♥</span>`).join(``)}\n</div>\n<div>Время: ${state.time}</div>\n</header>`;\n","/* eslint-disable object-curly-spacing */\nimport { render } from '../util.js';\nconst template = `<div>\n<div class=\"result\"></div>\n<small>Для справки введите <i>help</i></small>\n</div>`;\n\n\nexport default render(template);\n","/* eslint-disable object-curly-spacing */\nconst render = (html) => {\n  const wrapper = document.createElement(`div`);\n  wrapper.innerHTML = html.trim();\n  return wrapper;\n};\n\nexport default class AbstractView {\n  constructor() {\n    if (new.target === AbstractView) {\n      throw new Error(`Can't instantiate AbstractView, only concrete one`);\n    }\n  }\n\n  get template() {\n    throw new Error(`Template is required`);\n  }\n\n  get element() {\n    if (this._element) {\n      return this._element;\n    }\n    this._element = this.render();\n    this.bind(this._element);\n    return this._element;\n  }\n\n  render() {\n    return render(this.template);\n  }\n\n  bind(element) {\n    // bind handlers if required\n  }\n}\n","/* eslint-disable object-curly-spacing */\nimport AbstractView from './abstract-view.js';\n\n\nconst ENTER_KEY_CODE = 13;\n\n\nexport default class LevelView extends AbstractView {\n  constructor(level) {\n    super();\n    this.level = level;\n  }\n\n  get template() {\n    return `<div class=\"quest\">\n    <p class=\"text\">${this.level.text}</p>\n\n    <ul class=\"answers\">\n    ${this.level.answers.map((it) => `<li class=\"answer\">${it.action.toUpperCase()}. ${it.title}</li>`).join(``)}\n    </ul>\n    <input type=\"text\">\n  </div>`;\n  }\n\n  onAnswer(answer) { }\n\n  bind() {\n    const answersElement = this.element.querySelector(`.answers`);\n\n    const answersElements = Array.from(answersElement.children);\n\n    answersElement.addEventListener(`click`, (evt) => {\n      const answerIndex = answersElements.indexOf(evt.target);\n      const answer = this.level.answers[answerIndex];\n      if (answer) {\n        this.onAnswer(answer);\n      }\n    });\n\n    this._answerInput = this.element.querySelector(`input`);\n    this._answerInput.addEventListener(`keydown`, ({ keyCode }) => {\n      if (keyCode === ENTER_KEY_CODE) {\n        const current = this.level;\n        const { value = `` } = this._answerInput;\n        const userAnswer = value.toUpperCase();\n        for (const answer of current.answers) {\n          if (userAnswer === answer.action.toUpperCase()) {\n            this.onAnswer(answer);\n          }\n        }\n      }\n    });\n  }\n}\n\n","export const INITIAL_GAME = Object.freeze({\n  level: 0,\n  lives: 3,\n  time: 0\n});\n\nexport const Result = {\n  NOOP: 0,\n  DIE: 1,\n  WIN: 2,\n  NEXT_LEVEL: 3\n};\n\nexport const changeLevel = (game, level) => {\n  if (typeof level !== `number`) {\n    throw new Error(`Level should not be negative value`);\n  }\n  if (level < 0) {\n    throw new Error(`Level should not be negative value`);\n  }\n\n  const newGame = Object.assign({}, game, {\n    level\n  });\n  return newGame;\n};\n\nexport const canContinue = (game) => {\n  return game.lives !== 0 ? game : false;\n};\n\nexport const die = (game) => {\n  game.lives -= 1;\n  return game;\n};\n","/* eslint-disable object-curly-spacing */\nimport { Result } from \"./quest\";\n\n\nexport default {\n  'level-0': {\n    text: `Вас зовут Луиджи Марио, вы водопроводчик, но сейчас перед вами стоит очень важная миссия — спасти принцессу\n  Грибного Королевства Тоадстул Пич. Её похитил злой повелитель черепах Боузер и вы отправились в Грибное Королевство,\n  чтобы победить Боузера и освободить принцессу. Вы отправляетесь в первый замок, но, чтобы в него попасть нужно\n  преодолеть несколько препятствий. Вы стоите посреди на одной из равнин Грибного Королевства и видите как на вас\n  стремительно несется хмурый гриб вашего роста. Нужно срочно что-то предпринять`,\n    answers: [\n      {\n        action: `left`,\n        title: `Вы побежите влево, от гриба`,\n        result: Result.DIE\n      },\n      {\n        action: `right`,\n        title: `Вы побежите вправо, прямо на гриб`,\n        result: Result.DIE\n      },\n      {\n        action: `jump`,\n        title: `Вы прыгните вверх`,\n        result: Result.NEXT_LEVEL\n      }\n    ]\n  },\n\n  'level-1': {\n    text: `Теперь, когда угроза быть убитым грибом миновала, вы можете спокойно оглядеться по сторонам. Вы видите что над вами прямо в двумерном небе висят кирпичные блоки, которые перемещаются с непонятными металлическими конструкциями. Что вы предпримете?`,\n    answers: [\n      {\n        action: `left`,\n        title: `Вы побежите влево`,\n        result: Result.DIE\n      },\n      {\n        action: `right`,\n        title: `Вы побежите вправо`,\n        result: Result.DIE\n      },\n      {\n        action: `jump`,\n        title: `Вы прыгните вверх`,\n        result: Result.DIE\n      }\n    ]\n  }\n};\n","/* eslint-disable object-curly-spacing */\nimport { render, changeScreen } from './util.js';\nimport renderHeader from './game/header.js';\nimport footer from './game/footer.js';\nimport LevelView from './game/level-view.js';\nimport { INITIAL_GAME } from './data/quest.js';\nimport QUEST from './data/quest-data.js';\n// import showGameOver from './game/gameover-screen.js';\n\n\n// const ENTER_KEY_CODE = 13; //\n\nconst gameContainerElement = render(``);\nconst headerElement = render(``);\nconst levelElement = render(``);\n\n// init game content\ngameContainerElement.appendChild(headerElement);\ngameContainerElement.appendChild(levelElement);\ngameContainerElement.appendChild(footer);\n\nconst getLevel = (state) => QUEST[`level-${state.level}`];\n\n// const onAnswer = (answer) => {\n//   switch (answer.result) {\n//     case Result.NEXT_LEVEL:\n//       game = changeLevel(game, game.level + 1);\n//       updateGame(game);\n//       break;\n//     case Result.DIE:\n//       game = die(game);\n//       if (!canContinue(game)) {\n//         showGameOver(game);\n//       } else {\n//         updateGame(game);\n//       }\n//       break;\n//     case Result.WIN:\n//       showGameOver(game);\n//       break;\n//     case Result.NOOP:\n//       // just do nothing\n//       break;\n//     default:\n//       throw new Error(`Unknown result:`);\n//   }\n// };\n\nconst updateGame = (state) => {\n  const currentLevel = getLevel(state);\n  const levelViewElement = new LevelView(currentLevel).element;\n\n  headerElement.innerHTML = renderHeader(state);\n  levelElement.innerHTML = ``;\n  levelElement.appendChild(levelViewElement);\n\n  // const answersElement = levelElement.querySelector(`.answers`);\n\n  // const answersElements = Array.from(answersElement.children);\n\n  // answersElement.addEventListener(`click`, (evt) => {\n  //   const answerIndex = answersElements.indexOf(evt.target);\n  //   const answer = currentLevel.answers[answerIndex];\n  //   if (answer) {\n  //     onAnswer(answer);\n  //   }\n  // });\n\n};\n\n// levelElement.addEventListener(`keydown`, ({ keyCode }) => {\n//   if (keyCode === ENTER_KEY_CODE) {\n//     const current = getLevel(game);\n//     const { value = `` } = levelElement.querySelector(`input`);\n//     const userAnswer = value.toUpperCase();\n\n//     for (const answer of current.answers) {\n//       if (userAnswer === answer.action.toUpperCase()) {\n//         onAnswer(answer);\n//         updateGame(game);\n//       }\n//     }\n//   }\n// });\n\nlet game; //\n\nconst startGame = () => {\n  game = Object.assign({}, INITIAL_GAME);\n\n  updateGame(game);\n  changeScreen(gameContainerElement);\n};\n\n\nexport default startGame;\n","/* eslint-disable object-curly-spacing */\nimport { render } from './util.js';\nimport gameScreen from './game-screen.js';\n\n\nconst template = `<div class=\"end\">\n<p>Ghbdtn! Настало время приключений! Вы готовы сразится с неприятностями и получить принцессу прямо сейчас?!<br>\n  А?!<br>\n  Точно?!<br>\n  Уверен?!<br>\n  Стопудов?!</p>\n<p>08 есть?</p>\n<div class=\"repeat\">\n  Ваше имя:<input type=\"text\"><br>\n  <span class=\"repeat-action\">Да</span>\n</div>\n</div>`;\n\nconst element = render(template);\n\nconst agreeButton = element.querySelector(`.repeat-action`);\n\nagreeButton.addEventListener(`click`, () => {\n  gameScreen();\n});\n\n\nexport default element;\n","import {changeScreen} from './util.js';\nimport welcomeScreen from './welcome-screen.js';\n\n\nchangeScreen(welcomeScreen);\n"],"names":["render","template","gameScreen","welcomeScreen"],"mappings":";;;EAAO,MAAM,MAAM,GAAG,CAAC,QAAQ,KAAK;EACpC,EAAE,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;EAChD,EAAE,OAAO,CAAC,SAAS,GAAG,QAAQ,CAAC;EAC/B,EAAE,OAAO,OAAO,CAAC;EACjB,CAAC,CAAC;;AAEF,EAAO,MAAM,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;;AAE3D,EAAO,MAAM,YAAY,GAAG,CAAC,OAAO,KAAK;EACzC,EAAE,WAAW,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC;EAC7B,EAAE,WAAW,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;EACnC,CAAC,CAAC;;ACXF,qBAAe,CAAC,KAAK,KAAK,CAAC;UACjB,EAAE,KAAK,CAAC,KAAK,CAAC;;AAExB,EAAE,IAAI,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC;KACvB,IAAI,CAAC,CAAC,mCAAmC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1D,EAAE,IAAI,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC;KACnB,IAAI,CAAC,CAAC,kCAAkC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;;YAE7C,EAAE,KAAK,CAAC,IAAI,CAAC;SAChB,CAAC,CAAC;;ECTX;AACA,EACA,MAAM,QAAQ,GAAG,CAAC;;;MAGZ,CAAC,CAAC;;;AAGR,eAAe,MAAM,CAAC,QAAQ,CAAC,CAAC;;ECRhC;EACA,MAAMA,QAAM,GAAG,CAAC,IAAI,KAAK;EACzB,EAAE,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;EAChD,EAAE,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;EAClC,EAAE,OAAO,OAAO,CAAC;EACjB,CAAC,CAAC;;AAEF,EAAe,MAAM,YAAY,CAAC;EAClC,EAAE,WAAW,GAAG;EAChB,IAAI,IAAI,GAAG,CAAC,MAAM,KAAK,YAAY,EAAE;EACrC,MAAM,MAAM,IAAI,KAAK,CAAC,CAAC,iDAAiD,CAAC,CAAC,CAAC;EAC3E,KAAK;EACL,GAAG;;EAEH,EAAE,IAAI,QAAQ,GAAG;EACjB,IAAI,MAAM,IAAI,KAAK,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC;EAC5C,GAAG;;EAEH,EAAE,IAAI,OAAO,GAAG;EAChB,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;EACvB,MAAM,OAAO,IAAI,CAAC,QAAQ,CAAC;EAC3B,KAAK;EACL,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;EAClC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;EAC7B,IAAI,OAAO,IAAI,CAAC,QAAQ,CAAC;EACzB,GAAG;;EAEH,EAAE,MAAM,GAAG;EACX,IAAI,OAAOA,QAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;EACjC,GAAG;;EAEH,EAAE,IAAI,CAAC,OAAO,EAAE;EAChB;EACA,GAAG;EACH,CAAC;;EClCD;AACA,AACA;;EAEA,MAAM,cAAc,GAAG,EAAE,CAAC;;;AAG1B,EAAe,MAAM,SAAS,SAAS,YAAY,CAAC;EACpD,EAAE,WAAW,CAAC,KAAK,EAAE;EACrB,IAAI,KAAK,EAAE,CAAC;EACZ,IAAI,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;EACvB,GAAG;;EAEH,EAAE,IAAI,QAAQ,GAAG;EACjB,IAAI,OAAO,CAAC;oBACQ,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;;;IAGlC,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,mBAAmB,EAAE,EAAE,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;;;QAGzG,CAAC,CAAC;EACV,GAAG;;EAEH,EAAE,QAAQ,CAAC,MAAM,EAAE,GAAG;;EAEtB,EAAE,IAAI,GAAG;EACT,IAAI,MAAM,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;;EAElE,IAAI,MAAM,eAAe,GAAG,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;;EAEhE,IAAI,cAAc,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,KAAK;EACtD,MAAM,MAAM,WAAW,GAAG,eAAe,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;EAC9D,MAAM,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;EACrD,MAAM,IAAI,MAAM,EAAE;EAClB,QAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;EAC9B,OAAO;EACP,KAAK,CAAC,CAAC;;EAEP,IAAI,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;EAC5D,IAAI,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,OAAO,EAAE,KAAK;EACnE,MAAM,IAAI,OAAO,KAAK,cAAc,EAAE;EACtC,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC;EACnC,QAAQ,MAAM,EAAE,KAAK,GAAG,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC;EACjD,QAAQ,MAAM,UAAU,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;EAC/C,QAAQ,KAAK,MAAM,MAAM,IAAI,OAAO,CAAC,OAAO,EAAE;EAC9C,UAAU,IAAI,UAAU,KAAK,MAAM,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE;EAC1D,YAAY,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;EAClC,WAAW;EACX,SAAS;EACT,OAAO;EACP,KAAK,CAAC,CAAC;EACP,GAAG;EACH,CAAC;;ECrDM,MAAM,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC;EAC1C,EAAE,KAAK,EAAE,CAAC;EACV,EAAE,KAAK,EAAE,CAAC;EACV,EAAE,IAAI,EAAE,CAAC;EACT,CAAC,CAAC,CAAC;;AAEH,EAAO,MAAM,MAAM,GAAG;EACtB,EAAE,IAAI,EAAE,CAAC;EACT,EAAE,GAAG,EAAE,CAAC;EACR,EAAE,GAAG,EAAE,CAAC;EACR,EAAE,UAAU,EAAE,CAAC;EACf,CAAC,CAAC;;ECXF;AACA,AACA;;AAEA,cAAe;EACf,EAAE,SAAS,EAAE;EACb,IAAI,IAAI,EAAE,CAAC;;;;gFAIqE,CAAC;EACjF,IAAI,OAAO,EAAE;EACb,MAAM;EACN,QAAQ,MAAM,EAAE,CAAC,IAAI,CAAC;EACtB,QAAQ,KAAK,EAAE,CAAC,2BAA2B,CAAC;EAC5C,QAAQ,MAAM,EAAE,MAAM,CAAC,GAAG;EAC1B,OAAO;EACP,MAAM;EACN,QAAQ,MAAM,EAAE,CAAC,KAAK,CAAC;EACvB,QAAQ,KAAK,EAAE,CAAC,iCAAiC,CAAC;EAClD,QAAQ,MAAM,EAAE,MAAM,CAAC,GAAG;EAC1B,OAAO;EACP,MAAM;EACN,QAAQ,MAAM,EAAE,CAAC,IAAI,CAAC;EACtB,QAAQ,KAAK,EAAE,CAAC,iBAAiB,CAAC;EAClC,QAAQ,MAAM,EAAE,MAAM,CAAC,UAAU;EACjC,OAAO;EACP,KAAK;EACL,GAAG;;EAEH,EAAE,SAAS,EAAE;EACb,IAAI,IAAI,EAAE,CAAC,sPAAsP,CAAC;EAClQ,IAAI,OAAO,EAAE;EACb,MAAM;EACN,QAAQ,MAAM,EAAE,CAAC,IAAI,CAAC;EACtB,QAAQ,KAAK,EAAE,CAAC,iBAAiB,CAAC;EAClC,QAAQ,MAAM,EAAE,MAAM,CAAC,GAAG;EAC1B,OAAO;EACP,MAAM;EACN,QAAQ,MAAM,EAAE,CAAC,KAAK,CAAC;EACvB,QAAQ,KAAK,EAAE,CAAC,kBAAkB,CAAC;EACnC,QAAQ,MAAM,EAAE,MAAM,CAAC,GAAG;EAC1B,OAAO;EACP,MAAM;EACN,QAAQ,MAAM,EAAE,CAAC,IAAI,CAAC;EACtB,QAAQ,KAAK,EAAE,CAAC,iBAAiB,CAAC;EAClC,QAAQ,MAAM,EAAE,MAAM,CAAC,GAAG;EAC1B,OAAO;EACP,KAAK;EACL,GAAG;EACH,CAAC,CAAC;;EClDF;AACA,EAMA;;;EAGA;;EAEA,MAAM,oBAAoB,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;EACxC,MAAM,aAAa,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;EACjC,MAAM,YAAY,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;;EAEhC;EACA,oBAAoB,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;EAChD,oBAAoB,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;EAC/C,oBAAoB,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;;EAEzC,MAAM,QAAQ,GAAG,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC,MAAM,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;;EAE1D;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAM,UAAU,GAAG,CAAC,KAAK,KAAK;EAC9B,EAAE,MAAM,YAAY,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;EACvC,EAAE,MAAM,gBAAgB,GAAG,IAAI,SAAS,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC;;EAE/D,EAAE,aAAa,CAAC,SAAS,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC;EAChD,EAAE,YAAY,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC;EAC9B,EAAE,YAAY,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;;EAE7C;;EAEA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,CAAC,CAAC;;EAEF;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,IAAI,CAAC;;EAET,MAAM,SAAS,GAAG,MAAM;EACxB,EAAE,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;;EAEzC,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC;EACnB,EAAE,YAAY,CAAC,oBAAoB,CAAC,CAAC;EACrC,CAAC,CAAC;;EC5FF;AACA,AAEA;;EAEA,MAAMC,UAAQ,GAAG,CAAC;;;;;;;;;;;MAWZ,CAAC,CAAC;;EAER,MAAM,OAAO,GAAG,MAAM,CAACA,UAAQ,CAAC,CAAC;;EAEjC,MAAM,WAAW,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;;EAE5D,WAAW,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,EAAE,MAAM;EAC5C,EAAEC,SAAU,EAAE,CAAC;EACf,CAAC,CAAC,CAAC;;ECpBH,YAAY,CAACC,OAAa,CAAC,CAAC;;;;"}