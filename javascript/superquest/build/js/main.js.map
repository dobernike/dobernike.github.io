{"version":3,"file":"main.js","sources":["js/util.js","js/game/header.js","js/game/footer.js","js/game/level.js","js/data/quest.js","js/data/quest-data.js","js/game/gameover-screen.js","js/game-screen.js","js/welcome-screen.js","js/main.js"],"sourcesContent":["export const render = (template) => {\n  const wrapper = document.createElement(`div`);\n  wrapper.innerHTML = template;\n  return wrapper;\n};\n\nexport const mainElement = document.querySelector(`#main`);\n\nexport const changeScreen = (element) => {\n  mainElement.innerHTML = ``;\n  mainElement.appendChild(element);\n};\n\n","export default (state) => `<header class=\"header\">\n<div>Мир: ${state.level}</div>\n<div>Жизни:\n${new Array(3 - state.lives)\n    .fill(`<span class=\"heart__empty\">♡</span>`).join(``)}\n${new Array(state.lives)\n    .fill(`<span class=\"heart__full\">♥</span>`).join(``)}\n</div>\n<div>Время: ${state.time}</div>\n</header>`;\n","/* eslint-disable object-curly-spacing */\nimport { render } from '../util.js';\nconst template = `<div>\n<div class=\"result\"></div>\n<small>Для справки введите <i>help</i></small>\n</div>`;\n\n\nexport default render(template);\n","const getAnswer = (level) => {\n  let answers = ``;\n  for (const answer of level.answers) {\n    answers += `<li class=\"answer\"> ${answer.action.toUpperCase() + ` ` + answer.title}</li>`;\n  }\n  return answers;\n};\n\n\nexport default (lvl) => `\n<div>\n<div class=\"quest\">\n  <p class=\"text\">\n  ${lvl.text}\n  </p>\n  <input type=\"text\">\n  <ul class=\"answers\">\n  ${getAnswer(lvl)}\n  </ul >\n</div >\n</div >\n`;\n\n","export const INITIAL_GAME = Object.freeze({\n  level: 0,\n  lives: 3,\n  time: 0\n});\n\nexport const Result = {\n  NOOP: 0,\n  DIE: 1,\n  WIN: 2,\n  NEXT_LEVEL: 3\n};\n\nexport const changeLevel = (game, level) => {\n  if (typeof level !== `number`) {\n    throw new Error(`Level should not be negative value`);\n  }\n  if (level < 0) {\n    throw new Error(`Level should not be negative value`);\n  }\n\n  const newGame = Object.assign({}, game, {\n    level\n  });\n  return newGame;\n};\n\nexport const canContinue = (game) => {\n  return game.lives !== 0 ? game : false;\n};\n\nexport const die = (game) => {\n  game.lives -= 1;\n  return game;\n};\n","/* eslint-disable object-curly-spacing */\nimport { Result } from \"./quest\";\n\n\nexport default {\n  'level-0': {\n    text: `Вас зовут Луиджи Марио, вы водопроводчик, но сейчас перед вами стоит очень важная миссия — спасти принцессу\n  Грибного Королевства Тоадстул Пич. Её похитил злой повелитель черепах Боузер и вы отправились в Грибное Королевство,\n  чтобы победить Боузера и освободить принцессу. Вы отправляетесь в первый замок, но, чтобы в него попасть нужно\n  преодолеть несколько препятствий. Вы стоите посреди на одной из равнин Грибного Королевства и видите как на вас\n  стремительно несется хмурый гриб вашего роста. Нужно срочно что-то предпринять`,\n    answers: [\n      {\n        action: `left`,\n        title: `Вы побежите влево, от гриба`,\n        result: Result.DIE\n      },\n      {\n        action: `right`,\n        title: `Вы побежите вправо, прямо на гриб`,\n        result: Result.DIE\n      },\n      {\n        action: `jump`,\n        title: `Вы прыгните вверх`,\n        result: Result.NEXT_LEVEL\n      }\n    ]\n  },\n\n  'level-1': {\n    text: `Теперь, когда угроза быть убитым грибом миновала, вы можете спокойно оглядеться по сторонам. Вы видите что над вами прямо в двумерном небе висят кирпичные блоки, которые перемещаются с непонятными металлическими конструкциями. Что вы предпримете?`,\n    answers: [\n      {\n        action: `left`,\n        title: `Вы побежите влево`,\n        result: Result.DIE\n      },\n      {\n        action: `right`,\n        title: `Вы побежите вправо`,\n        result: Result.DIE\n      },\n      {\n        action: `jump`,\n        title: `Вы прыгните вверх`,\n        result: Result.DIE\n      }\n    ]\n  }\n};\n","/* eslint-disable object-curly-spacing */\nimport { render, changeScreen } from '../util.js';\nimport header from './header.js';\n\n\nexport default (game) => {\n  const template = `${header(game)}\n<div>\n<div class=\"end\">\n  <p>Вы погибли =(!</p>\n  <p>Продолжить с последнего уровня?</p>\n  <div class=\"repeat\"><span class=\"repeat-action\">Да</span>|<span class=\"repeat-action\">Не</span></div>\n</div>\n</div>`;\n  const gameover = render(template);\n  return changeScreen(gameover);\n};\n","/* eslint-disable object-curly-spacing */\nimport { render, changeScreen } from './util.js';\nimport renderHeader from './game/header.js';\nimport footer from './game/footer.js';\nimport renderLevel from './game/level.js';\nimport { INITIAL_GAME, changeLevel, canContinue, die, Result } from './data/quest.js';\nimport QUEST from './data/quest-data.js';\nimport showGameOver from './game/gameover-screen.js';\n\n\nconst ENTER_KEY_CODE = 13; //\n\nconst gameContainerElement = render(``);\nconst headerElement = render(``);\nconst levelElement = render(``);\n\n// init game content\ngameContainerElement.appendChild(headerElement);\ngameContainerElement.appendChild(levelElement);\ngameContainerElement.appendChild(footer);\n\nconst getLevel = (state) => QUEST[`level-${state.level}`];\n\nconst updateGame = (state) => {\n  headerElement.innerHTML = renderHeader(state);\n  levelElement.innerHTML = renderLevel(getLevel(state));\n};\n\nlevelElement.addEventListener(`keydown`, ({ keyCode }) => {\n  if (keyCode === ENTER_KEY_CODE) {\n    const current = getLevel(game);\n    const { value = `` } = levelElement.querySelector(`input`);\n    const userAnswer = value.toUpperCase();\n\n    for (const answer of current.answers) {\n      if (userAnswer === answer.action.toUpperCase()) {\n        switch (answer.result) {\n          case Result.NEXT_LEVEL:\n            game = changeLevel(game, game.level + 1);\n            updateGame(game);\n            break;\n          case Result.DIE:\n            game = die(game);\n            if (!canContinue(game)) {\n              showGameOver(game);\n            }\n            break;\n          case Result.WIN:\n            showGameOver(game);\n            break;\n          case Result.NOOP:\n            // just do nothing\n            break;\n          default:\n            throw new Error(`Unknown result:`);\n        }\n        updateGame(game);\n      }\n    }\n  }\n});\n\nlet game; //\n\nconst startGame = () => {\n  game = Object.assign({}, INITIAL_GAME);\n\n  updateGame(game);\n  changeScreen(gameContainerElement);\n};\n\n\nexport default startGame;\n","/* eslint-disable object-curly-spacing */\nimport { render } from './util.js';\nimport gameScreen from './game-screen.js';\n\n\nconst template = `<div class=\"end\">\n<p>Ghbdtn! Настало время приключений! Вы готовы сразится с неприятностями и получить принцессу прямо сейчас?!<br>\n  А?!<br>\n  Точно?!<br>\n  Уверен?!<br>\n  Стопудов?!</p>\n<p>08 есть?</p>\n<div class=\"repeat\">\n  Ваше имя:<input type=\"text\"><br>\n  <span class=\"repeat-action\">Да</span>\n</div>\n</div>`;\n\nconst element = render(template);\n\nconst agreeButton = element.querySelector(`.repeat-action`);\n\nagreeButton.addEventListener(`click`, () => {\n  gameScreen();\n});\n\n\nexport default element;\n","import {changeScreen} from './util.js';\nimport welcomeScreen from './welcome-screen.js';\n\n\nchangeScreen(welcomeScreen);\n"],"names":["renderHeader","template","gameScreen","welcomeScreen"],"mappings":"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"}