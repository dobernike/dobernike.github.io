{"version":3,"sources":["store.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/bookstore-service.js","components/hoc/with-bookstore-service.js","actions/index.js","utils/compose.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/book-list/index.js","components/shopping-cart-table/shopping-cart-table.js","components/shopping-cart-table/index.js","components/pages/home-page.js","components/pages/cart-page.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","index.js"],"names":["timeout","BookListItem","_ref","book","onAddedToCart","title","author","price","coverImage","react_default","a","createElement","className","src","alt","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapper","props","bookstoreService","Object","assign","booksError","error","type","payload","bookAddedToCart","bookId","fetchBooks","dispatch","getBooks","then","data","catch","err","compose","_len","arguments","length","funcs","Array","_key","comp","reduceRight","wrapped","f","Spinner","ErrorIndicator","BookList","books","map","key","id","components_book_list_item","BookListContainer","this","_this$props","loading","components_spinner","components_error_indicator","book_list_BookList","Component","connect","_ref2","_ref2$bookList","bookList","_ref3","bindActionCreators","mapDispatchToProps","onIncrease","onDecrease","onDelete","ShoppingCartTable","_ref2$shoppingCart","shoppingCart","items","cartItems","total","orderTotal","item","idx","count","HomePage","components_book_list","components_shopping_cart_table","CartPage","ShopHeader","numItems","react_router_dom","to","App","role","components_shop_header","react_router","path","component","exact","ErrorBoundry","state","hasError","setState","children","BookstoreService","_this","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateCartItems","concat","toConsumableArray","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","_item$id","_item$count","_item$title","_item$total","updateCartItem","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","getState","console","log","ReactDOM","render","es","error_boundry","value","components_app","document","getElementById"],"mappings":"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","file":"static/js/main.159fb335.chunk.js","sourcesContent":["import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\n\r\nimport reducer from './reducers';\r\n\r\nconst logMiddleware = ({ getState }) => (next) => (action) => {\r\n  console.log(action.type, getState());\r\n  return next(action);\r\n};\r\n\r\nconst stringMiddleware = () => (next) => (action) => {\r\n  if (typeof action === `string`) {\r\n    return next({\r\n      type: action\r\n    });\r\n  }\r\n\r\n  return next(action);\r\n};\r\n\r\nconst store = createStore(reducer, applyMiddleware(\r\n  thunkMiddleware, stringMiddleware, logMiddleware));\r\n\r\n\r\nconst delayedActionCreator = (timeout) => (dispatch) => {\r\n  setTimeout(() => dispatch({\r\n    type: `DELAYED_ACTION`\r\n  }), timeout);\r\n}\r\n\r\nstore.dispatch(delayedActionCreator(3000));\r\n\r\nexport default store;\r\n","import BookListItem from './book-list-item';\r\n\r\nexport default BookListItem;\r\n","import React from 'react';\r\nimport './book-list-item.css';\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n  const { title, author, price, coverImage } = book;\r\n  return (\r\n    <div className=\"book-list-item\">\r\n      <div className=\"book-cover\">\r\n        <img src={coverImage} alt=\"cover\" />\r\n      </div>\r\n      <div className=\"book-details\">\r\n        <span className=\"book-title\">{title}</span>\r\n        <div className=\"book-author\">{author}</div>\r\n        <div className=\"book-price\">${price}</div>\r\n        <button \r\n        onClick={onAddedToCart}\r\n        className=\"btn btn-info add-to-cart\">Add to cart</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookListItem\r\n","import React from 'react';\r\n\r\nconst {\r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n  BookstoreServiceProvider,\r\n  BookstoreServiceConsumer\r\n}","import React from 'react';\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\r\n\r\nconst withBookstoreService = () => (Wrapper) => {\r\n  return (props) => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {\r\n          (bookstoreService) => {\r\n            return (\r\n              <Wrapper {...props} bookstoreService={bookstoreService} />\r\n            );\r\n          }\r\n        }\r\n      </BookstoreServiceConsumer>\r\n    );\r\n  }\r\n};\r\n\r\nexport default withBookstoreService;\r\n","\r\nconst booksLoaded = (newBooks) => {\r\n  return {\r\n    type: `FETCH_BOOKS_SUCCESS`,\r\n    payload: newBooks\r\n  };\r\n};\r\n\r\nconst booksRequester = () => {\r\n  return {\r\n    type: `FETCH_BOOKS_REQUEST`\r\n  }\r\n};\r\n\r\nconst booksError = (error) => {\r\n  return {\r\n    type: `FETCH_BOOKS_FAILURE`,\r\n    payload: error\r\n  };\r\n};\r\n\r\nexport const bookAddedToCart = (bookId) => {\r\n  return {\r\n    type: `BOOK_ADDED_TO_CART`,\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nexport const bookRemoveFromCart = (bookId) => {\r\n  return {\r\n    type: `BOOK_REMOVE_FROM_CART`,\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nexport const allBooksRemoveFromCart = (bookId) => {\r\n  return {\r\n    type: `ALL_BOOKS_REMOVE_FROM_CART`,\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\r\n  dispatch(booksRequester());\r\n  bookstoreService.getBooks()\r\n    .then((data) => dispatch(booksLoaded(data)))\r\n    .catch((err) => dispatch(booksError));\r\n};\r\n\r\nexport {\r\n  fetchBooks\r\n};\r\n","const compose = (...funcs) => (comp) => {\r\n  return funcs.reduceRight(\r\n    (wrapped, f) => f(wrapped), comp);\r\n};\r\n\r\nexport default compose;","import Spinner from './spinner';\r\n\r\nexport default Spinner;","import React from 'react';\r\nimport './spinner.css';\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"lds-css ng-scope\">\r\n      <div className=\"lds-eclipse\">\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;","import ErrorIndicator from './error-indicator';\r\n\r\nexport default ErrorIndicator;","import React from 'react';\r\nimport './error-indicator.css';\r\n\r\nconst ErrorIndicator = () => {\r\n  return (\r\n    <div className=\"error-indicator\">\r\n      Oops! Some error. We repair it, right now!\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorIndicator;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport './book-list.css';\r\nimport BookListItem from '../book-list-item';\r\nimport { withBookstoreService } from '../hoc';\r\nimport { fetchBooks, bookAddedToCart } from '../../actions';\r\nimport { bindActionCreators } from 'redux';\r\nimport { compose } from '../../utils';\r\nimport Spinner from '../spinner';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nconst BookList = ({ books, onAddedToCart }) => {\r\n  return (\r\n    <ul className=\"book-list\">\r\n      {\r\n        books.map((book) => {\r\n          return (\r\n            <li key={book.id}><BookListItem\r\n              book={book}\r\n              onAddedToCart={() => onAddedToCart(book.id)} /></li>\r\n          )\r\n        })\r\n      }\r\n    </ul>\r\n  );\r\n};\r\n\r\nclass BookListContainer extends Component {\r\n\r\n  componentDidMount() {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, loading, error, onAddedToCart } = this.props;\r\n\r\n    if (loading) {\r\n      return <Spinner />;\r\n    }\r\n\r\n    if (error) {\r\n      return <ErrorIndicator />;\r\n    }\r\n\r\n    return <BookList books={books} onAddedToCart={onAddedToCart} />;\r\n  };\r\n};\r\n\r\n// Эта функция опредяляет, какие свойства\r\n// получит компонент из Redux\r\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\r\n  return { books, loading, error };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\r\n  return bindActionCreators({\r\n    fetchBooks: fetchBooks(bookstoreService),\r\n    onAddedToCart: bookAddedToCart\r\n  }, dispatch);\r\n}\r\n\r\nexport default compose(\r\n  withBookstoreService(),\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer);\r\n","import BookList from './book-list';\r\n\r\nexport default BookList;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bookAddedToCart, bookRemoveFromCart, allBooksRemoveFromCart } from '../../actions';\r\nimport './shopping-cart-table.css';\r\n\r\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete }) => {\r\n  const renderRow = (item, idx) => {\r\n    const { id, title, count, total } = item;\r\n    return (\r\n      <tr key={id}>\r\n        <td>{idx + 1}</td>\r\n        <td>{title}</td>\r\n        <td>{count}</td>\r\n        <td>${total}</td>\r\n        <td>\r\n          <button\r\n            onClick={() => onDelete(id)}\r\n            className=\"btn btn-outline-danger btn-sm float-right\">\r\n            <i className=\"fa fa-trash-o\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onIncrease(id)}\r\n            className=\"btn btn-outline-success btn-sm float-right\">\r\n            <i className=\"fa fa-plus-circle\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onDecrease(id)}\r\n            className=\"btn btn-outline-warning btn-sm float-right\">\r\n            <i className=\"fa fa-minus-circle\" />\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"shopping-cart-table\">\r\n      <h2>Your Order</h2>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Item</th>\r\n            <th>Count</th>\r\n            <th>Price</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          {items.map(renderRow)}\r\n        </tbody>\r\n      </table>\r\n\r\n      <div className=\"total\">\r\n        Total: ${total}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\r\n  return {\r\n    items: cartItems,\r\n    total: orderTotal\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  onIncrease: bookAddedToCart,\r\n\r\n  onDecrease: bookRemoveFromCart,\r\n\r\n  onDelete: allBooksRemoveFromCart\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\r\n","import ShoppingCartTable from './shopping-cart-table';\r\n\r\nexport default ShoppingCartTable;","import React from 'react';\r\nimport BookList from '../book-list';\r\nimport ShoppingCartTable from '../shopping-cart-table';\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <div>\r\n      <BookList />\r\n      <ShoppingCartTable />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;","import React from 'react';\r\n\r\nconst CartPage = () => {\r\n  return (\r\n    <div>CartPage</div>\r\n  );\r\n};\r\n\r\nexport default CartPage;\r\n","import ShopHeader from './shop-header';\r\n\r\nexport default ShopHeader;","import React from 'react';\r\nimport './shop-header.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst ShopHeader = ({ numItems, total }) => {\r\n  return (\r\n    <header className=\"shop-header row\">\r\n      <Link to=\"/\" className=\"logo text-dark\">ReStore     </Link>\r\n      <Link to=\"/cart\" className=\"shopping-cart\">\r\n        <i className=\"cart-icon fa fa-shopping-cart\" />\r\n        {numItems} items (${total})\r\n      </Link>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default ShopHeader;","import App from './app';\r\n\r\nexport default App;","import React from 'react';\r\nimport './app.css';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\nimport { HomePage, CartPage } from '../pages';\r\nimport ShopHeader from '../shop-header';\r\n\r\nconst App = () => {\r\n  return (\r\n    <main role=\"main\" className=\"container\">\r\n      <ShopHeader numItems={5} total={210} />\r\n      {/* Отрисовывает максимум один Route */}\r\n      <Switch>\r\n        {/* Route - конфигурирует адрес \"/\" */}\r\n        <Route path=\"/\" component={HomePage} exact />\r\n        {/* Route - конфигурирует адрес \"/cart\" */}\r\n        < Route path=\"/cart\" component={CartPage} />\r\n        {/* Redirect Переадресовывает с несуществующего адреса на адрес \"/\" */}\r\n        <Redirect to=\"/\" exact />\r\n      </Switch>\r\n    </main>\r\n  )\r\n};\r\n\r\nexport default App;\r\n\r\n\r\n","import ErrorBoundry from './error-boundry';\r\n\r\nexport default ErrorBoundry;","import React, { Component } from 'react';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n\r\n  state = {\r\n    hasError: false\r\n  }\r\n\r\n  componentDidCatch() {\r\n    this.setState({\r\n      hasError: true\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return this.state.hasError ? <ErrorIndicator /> : this.props.children;\r\n  };\r\n};","\r\nexport default class BookstoreService {\r\n\r\n  data = [\r\n    {\r\n      id: 1,\r\n      title: `JavaScript: The Good Parts`,\r\n      author: `Douglas Crockford`,\r\n      price: 32,\r\n      coverImage: `https://covers.oreillystatic.com/images/9780596517748/lrg.jpg`\r\n    },\r\n    {\r\n      id: 2,\r\n      title: `You Don’t Know JS`,\r\n      author: `Kyle Simpson`,\r\n      price: 45,\r\n      coverImage: `https://images-na.ssl-images-amazon.com/images/I/514mHNWl0wL._SX330_BO1,204,203,200_.jpg`\r\n    }\r\n  ];\r\n\r\n  getBooks() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        if (Math.random() > 0.75) {\r\n          reject(new Error(`bad`));\r\n        } else {\r\n          resolve(this.data);\r\n        }\r\n      }, 700);\r\n    });\r\n  }\r\n\r\n}","const updateBookList = (state, action) => {\r\n\r\n    if (state === undefined) {\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null\r\n      }\r\n    }\r\n  \r\n    switch (action.type) {\r\n      case `FETCH_BOOKS_REQUEST`:\r\n        return {\r\n          books: [],\r\n          loading: true,\r\n          error: null\r\n        };\r\n      case `FETCH_BOOKS_SUCCESS`:\r\n        return {\r\n          books: action.payload,\r\n          loading: false,\r\n          error: null\r\n        };\r\n  \r\n      case `FETCH_BOOKS_FAILURE`:\r\n        return {\r\n          books: [],\r\n          loading: false,\r\n          error: action.payload\r\n        }\r\n      default:\r\n        return state.bookList;\r\n    }\r\n  };\r\n\r\n  export default updateBookList;","const updateCartItems = (cartItems, item, idx) => {\r\n\r\n    if (item.count === 0) {\r\n      return [\r\n        ...cartItems.slice(0, idx),\r\n        ...cartItems.slice(idx + 1)\r\n      ];\r\n    }\r\n  \r\n    if (idx === -1) {\r\n      return [\r\n        ...cartItems,\r\n        item\r\n      ];\r\n    }\r\n  \r\n    return [\r\n      ...cartItems.slice(0, idx),\r\n      item,\r\n      ...cartItems.slice(idx + 1)\r\n    ];\r\n  };\r\n  \r\n  const updateCartItem = (book, item = {}, quantity) => {\r\n  \r\n    const {\r\n      id = book.id,\r\n      count = 0,\r\n      title = book.title,\r\n      total = 0 } = item;\r\n  \r\n    return {\r\n      id,\r\n      title,\r\n      count: count + quantity,\r\n      total: total + quantity * book.price\r\n    };\r\n  \r\n  };\r\n  \r\n  const updateOrder = (state, bookId, quantity) => {\r\n    const { bookList: { books }, shoppingCart: { cartItems } } = state;\r\n    const book = books.find(({ id }) => id === bookId);\r\n    const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\r\n    const item = cartItems[itemIndex];\r\n  \r\n    const newItem = updateCartItem(book, item, quantity);\r\n  \r\n    return {\r\n      orderTotal: 0,\r\n      cartItems: updateCartItems(cartItems, newItem, itemIndex)\r\n    };\r\n  };\r\n  \r\n  \r\n  \r\n  const updateShoppingCart = (state, action) => {\r\n  \r\n    if (state === undefined) {\r\n      return {\r\n        cartItems: [],\r\n        orderTotal: 0\r\n      }\r\n    }\r\n  \r\n    switch (action.type) {\r\n      case `BOOK_ADDED_TO_CART`:\r\n        return updateOrder(state, action.payload, 1);\r\n  \r\n      case `BOOK_REMOVE_FROM_CART`:\r\n        return updateOrder(state, action.payload, -1);\r\n  \r\n      case `ALL_BOOKS_REMOVE_FROM_CART`:\r\n        const item = state.shoppingCart.cartItems.find(({ id }) => id === action.payload);\r\n        return updateOrder(state, action.payload, -item.count);\r\n  \r\n      default:\r\n        return state.shoppingCart;\r\n    }\r\n  \r\n  };\r\n\r\n  export default updateShoppingCart;","import updateBookList from './book-list';\r\nimport updateShoppingCart from './shopping-cart';\r\n\r\nconst reducer = (state, action) => {\r\n  return {\r\n    bookList: updateBookList(state, action),\r\n    shoppingCart: updateShoppingCart(state, action)\r\n  };\r\n};\r\n\r\nexport default reducer;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/app';\nimport ErrorBoundry from './components/error-boundry';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  // Предоставляет доступ к Redux Store\n  <Provider store={store}>\n    {/* Обработка ошибок в компонентах ниже */}\n    <ErrorBoundry>\n      {/* Передает сервис через ContextAPI */}\n      <BookstoreServiceProvider value={bookstoreService}>\n        {/* Router из пакета react-router */}\n        <Router>\n          {/* Само приложение */}\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById(`root`)\n);\n"],"sourceRoot":""}